---
title: "Prerequisites Setup"
description: "Prepare your environment for Permit Platform installation"
---

:::info Enterprise Only
This section is only relevant to Enterprise customers who acquired an on-prem license.
:::

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Prerequisites Setup

Complete these requirements before running the Permit Platform installer.

<div className="bg-blue-50 border-l-4 border-blue-400 p-4 my-4">
  <div className="flex">
    <div className="ml-3">
      <p className="text-sm text-blue-700">
        <strong>Important:</strong> The Permit Platform installer is designed to be self-contained and handles most setup automatically. You only need to meet basic system requirements and optionally configure Git integration.
      </p>
    </div>
  </div>
</div>

## System Requirements

### Server Specifications

| Component | Minimum | Recommended | Production |
|-----------|---------|-------------|------------|
| **CPU** | 4 cores | 8 cores | 16+ cores |
| **RAM** | 8GB | 16GB | 32GB+ |
| **Storage** | 50GB | 100GB | 200GB+ |
| **Network** | 1 Gbps | 1 Gbps | 10 Gbps |

### Operating System Support

- **Kubernetes**: Any CNCF-certified Kubernetes 1.21+
- **OpenShift**: 4.8+ (Red Hat OpenShift)
- **Cloud**: EKS, GKE, AKS support
- **On-premise**: Kubernetes clusters, kubeadm clusters

### Required Tools

The installer checks for these tools and will guide you to install them if missing:

- **kubectl**: Kubernetes command-line tool
- **helm**: Helm v3.8+ package manager  
- **docker**: Docker runtime (for loading images)

<div className="bg-green-50 border-l-4 border-green-400 p-4 my-4">
  <div className="flex">
    <div className="ml-3">
      <p className="text-sm text-green-700">
        <strong>Note:</strong> The installer will validate all requirements and provide guidance for any missing components.
      </p>
    </div>
  </div>
</div>

## Kubernetes Cluster Access

### Required Permissions

You need a Kubernetes cluster with:
- **Cluster admin access** or sufficient RBAC permissions
- **Ability to create namespaces** (default: `permit-platform`)
- **Access to create ingress resources**
- **Storage provisioning** (for databases and persistent volumes)

### Cluster Validation

Test your cluster access before installation:

```bash
# Check cluster connectivity
kubectl cluster-info

# Verify permissions
kubectl auth can-i create namespace
kubectl auth can-i create ingress

# Check storage classes
kubectl get storageclass
```

## Git Repository Setup (Required)

<div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 my-4">
  <div className="flex">
    <div className="ml-3">
      <p className="text-sm text-yellow-700">
        <strong>Required:</strong> Git repository setup is mandatory for Permit Platform policy management. The platform requires a Git repository to store and sync authorization policies.
      </p>
    </div>
  </div>
</div>

If you want to enable Git-based policy synchronization during installation:

### Step 1: Create SSH Key Pair

```bash
# Generate SSH key for policy repository access
ssh-keygen -t rsa -b 4096 -f permit-policy-key -N ""

# This creates:
# permit-policy-key      (private key - keep secure)
# permit-policy-key.pub  (public key - add to Git repository)

# Set correct permissions
chmod 600 permit-policy-key
```

### Step 2: Add Key to Your Git Platform

<Tabs>
  <TabItem value="github" label="GitHub">
    1. Go to your repository → **Settings** → **Deploy keys**
    2. Click **"Add deploy key"**
    3. Copy contents of `permit-policy-key.pub` and paste it
    4. ✅ **CRITICAL**: Check **"Allow write access"**
    5. Click **"Add key"**
  </TabItem>
  
  <TabItem value="gitlab" label="GitLab">
    1. Go to your project → **Settings** → **Repository** → **Deploy Keys**
    2. Click **"Add new key"**
    3. Paste contents of `permit-policy-key.pub`
    4. ✅ **CRITICAL**: Check **"Grant write permissions to this key"**
    5. Click **"Add key"**
  </TabItem>
  
  <TabItem value="bitbucket" label="Bitbucket">
    1. Go to repository → **Settings** → **Access keys**
    2. Click **"Add key"**
    3. Paste contents of `permit-policy-key.pub`
    4. Click **"Add SSH key"**
  </TabItem>
</Tabs>

### Step 3: Test Git Access

```bash
# Test SSH connection (replace with your Git platform)
ssh -T git@github.com -i ./permit-policy-key

# Expected response:
# "Hi username/repository! You've successfully authenticated, but GitHub does not provide shell access."
```

### Information Needed for Installation

You'll need during installation:
- **Repository SSH URL**: `git@github.com:yourorg/permit-policies.git`
- **Private key content**: Contents of the `permit-policy-key` file

## Network and Firewall Configuration

### Required Port Access

The installer configures these ports automatically, but ensure they're available:

| Port | Service | Purpose |
|------|---------|---------|
| **80** | HTTP | Web traffic (redirects to HTTPS) |
| **443** | HTTPS | Web application access |
| **6443** | Kubernetes API | K8s management (if applicable) |

### Firewall Configuration

For production deployments, ensure firewall rules allow:

```bash
# Web traffic (required)
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
iptables -A INPUT -p tcp --dport 443 -j ACCEPT

# Kubernetes API (if managing cluster externally)
iptables -A INPUT -p tcp --dport 6443 -j ACCEPT
```

### DNS Requirements

- **Production**: Configure DNS to point your domain to the server
- **Development**: Use `.local` domains with hosts file entries

## Storage Requirements

### Persistent Storage

The platform requires persistent storage for:
- **PostgreSQL database**: 10GB minimum, 20GB+ recommended
- **OpenSearch logs**: 15GB minimum (with 3 shards by default), 100GB+ for production
- **Application data**: 5GB for configurations and uploads

### Storage Classes

Verify your cluster has a default storage class:

```bash
# Check available storage classes
kubectl get storageclass

# Should show something like:
# NAME                 PROVISIONER             AGE
# standard (default)   k8s.io/minikube-hostpath   1h
```

## Pre-Installation Validation

### System Check Script

Before installation, run these validation commands:

```bash
# Check Kubernetes access
kubectl cluster-info
kubectl get nodes

# Verify permissions
kubectl auth can-i create namespace
kubectl auth can-i create deployment
kubectl auth can-i create ingress

# Check storage
kubectl get storageclass

# Verify Docker
docker --version
docker system info

# Check Helm
helm version
```

### Expected Outputs

All checks should pass:
```bash
✅ Kubernetes cluster: Reachable
✅ Cluster permissions: Sufficient
✅ Storage class: Available
✅ Docker: Running
✅ Helm: v3.8+
```

### Troubleshooting Common Issues

#### Kubernetes Access Issues

```bash
# If kubectl not configured:
export KUBECONFIG=/path/to/your/kubeconfig

# Test cluster connectivity
kubectl cluster-info
```

#### Storage Class Missing

```bash
# Create a simple storage class (development only)
kubectl apply -f - <<EOF
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: local-storage
  annotations:
    storageclass.kubernetes.io/is-default-class: "true"
provisioner: kubernetes.io/no-provisioner
volumeBindingMode: WaitForFirstConsumer
EOF
```

#### Docker Permission Issues

```bash
# Add user to docker group (requires logout/login)
sudo usermod -aG docker $USER

# Or use sudo with docker commands
sudo docker --version
```

## TLS/SSL Certificate Configuration

### Automatic Certificate Generation

The installer can automatically generate TLS certificates using **mkcert** (preferred) or **OpenSSL** (fallback):

```bash
# Install with auto-generated certificates
./scripts/install-permit-platform.sh --generate-tls
```

### Custom Certificates

For production deployments, you can provide your own certificates by configuring `values.yaml`:

```yaml
ingress:
  tls:
    enabled: true
    certificate:
      cert: |
        -----BEGIN CERTIFICATE-----
        [Your certificate content]
        -----END CERTIFICATE-----
      key: |
        -----BEGIN PRIVATE KEY-----
        [Your private key content]
        -----END PRIVATE KEY-----
```

### External TLS Termination

If using external TLS termination (AWS ALB, cert-manager, etc.):

```bash
# Skip TLS configuration (handle externally)
./scripts/install-permit-platform.sh --skip-tls-check
```

## Verification Checklist

Before proceeding to installation, verify:

- [ ] **Kubernetes cluster accessible** with `kubectl cluster-info`
- [ ] **Sufficient permissions** to create namespaces and deployments
- [ ] **Storage class available** for persistent volumes
- [ ] **Docker runtime working** and accessible
- [ ] **Helm v3.8+** installed and working
- [ ] **Frontend domain planned** (what domain customers will use to access the platform)
- [ ] **Git repository ready** (required for policy sync)
- [ ] **SSH key configured** (required for Git access)
- [ ] **TLS certificates ready** (or plan to use `--generate-tls` flag for auto-generation)

<div className="bg-blue-50 border-l-4 border-blue-400 p-4 my-4">
  <div className="flex">
    <div className="ml-3">
      <p className="text-sm text-blue-700">
        <strong>Ready to install?</strong> Continue to the <a href="/how-to/deploy/on-prem/installation" className="underline">Installation Guide</a> →
      </p>
    </div>
  </div>
</div>