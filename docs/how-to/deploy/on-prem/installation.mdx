---
title: "Installation Guide"
description: "Complete installation guide for Permit Platform on-premise deployment"
---

:::info Enterprise Only
This section is only relevant to Enterprise customers who acquired an on-prem license.
:::

# Installation Guide

Complete step-by-step installation guide for deploying Permit Platform in your environment.

<div className="bg-blue-50 border-l-4 border-blue-400 p-4 my-4">
  <div className="flex">
    <div className="ml-3">
      <p className="text-sm text-blue-700">
        <strong>Prerequisites required:</strong> Make sure you've completed the <a href="/how-to/deploy/on-prem/prerequisites" className="underline">prerequisites setup</a> before starting.
      </p>
    </div>
  </div>
</div>

## Installation Overview

The Permit Platform on-premise installation uses a unified installer that deploys all services as a single Kubernetes application. The installation requires minimal configuration - you only need to set your frontend domain and Policy Sync configuration.

### Package Contents

Your installer package includes:
- **Installation script**: `scripts/install-permit-platform.sh`
- **Helm chart**: Unified chart that deploys all services
- **Docker images**: All required images as tar files (airgapped deployment)
- **Configuration files**: values.yaml with examples and documentation

## Step 1: Extract and Prepare

```bash
# Extract the installer package
tar -xzf permit-platform-on-prem-installer-*.tar.gz
cd permit-platform-on-prem-installer-*

# Make installation script executable
chmod +x scripts/install-permit-platform.sh
```

## Step 2: Configure Frontend Domain

<div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 my-4">
  <div className="flex">
    <div className="ml-3">
      <p className="text-sm text-yellow-700">
        <strong>Required:</strong> You must configure the frontend domain before installation.
      </p>
    </div>
  </div>
</div>

Edit the `charts/permit-platform/values.yaml` file and replace the placeholder:

```yaml
global:
  # CHANGE THIS: Replace with your actual domain
  frontendDomain: "CHANGEME_FRONTEND_DOMAIN"
  
  # TO SOMETHING LIKE:
  frontendDomain: "permit.yourcompany.com"
  # OR
  frontendDomain: "permit-platform.internal.corp"
  # OR  
  frontendDomain: "permit.local"
```

**This single change configures ALL services automatically:**
- Frontend application URLs
- Keycloak authentication endpoints
- Backend cookie origins
- Ingress rules and TLS certificates

## Step 3: Configure Policy Sync (Optional)

If you want to use Git-based policy management, configure the Policy Sync service:

```yaml
permitServices:
  policySync:
    enabled: true
    policyRepoUrl: "git@github.com:yourorg/permit-policies.git"
    sshPrivateKey: |
      -----BEGIN OPENSSH PRIVATE KEY-----
      b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAA...
      -----END OPENSSH PRIVATE KEY-----
```

<div className="bg-green-50 border-l-4 border-green-400 p-4 my-4">
  <div className="flex">
    <div className="ml-3">
      <p className="text-sm text-green-700">
        <strong>Optional:</strong> You can skip Policy Sync configuration and set it up later through the UI.
      </p>
    </div>
  </div>
</div>

## Step 4: Run Installation

### Standard Installation (Recommended)

```bash
# Install with default configuration
./scripts/install-permit-platform.sh
```

### OpenShift Installation

```bash
# For OpenShift environments
./scripts/install-permit-platform.sh --openshift
```

### Custom Namespace

```bash
# Install to custom namespace
./scripts/install-permit-platform.sh --namespace my-permit-platform
```

## Installation Process

### What Happens During Installation

The installation script performs these steps automatically:

1. **Pre-flight Validation** (1-2 minutes)
   - Validates frontend domain configuration in values.yaml
   - Checks Kubernetes cluster connectivity
   - Verifies Docker and required tools
   - Validates image registry configuration

2. **Image Loading** (3-5 minutes)
   - Loads all Docker images from tar files
   - Tags images for local registry
   - Configures registry authentication (if needed)

3. **Namespace Setup** (30 seconds)
   - Creates permit-platform namespace
   - Sets up RBAC permissions

4. **Third-party Services Deployment** (2-3 minutes)
   - PostgreSQL database
   - Redis cache
   - OpenSearch for audit logs
   - RabbitMQ message queue
   - Keycloak authentication server

5. **Database Migrations** (1-2 minutes)
   - Backend database schema
   - OPAL relay database schema
   - Audit log indices in OpenSearch

6. **Platform Services Deployment** (2-4 minutes)
   - Permit backend services
   - OPAL policy management
   - Frontend application
   - Policy sync service (if configured)

7. **Ingress and Networking** (1 minute)
   - Nginx ingress controller
   - TLS certificate generation
   - Service discovery configuration

<div className="bg-blue-50 border-l-4 border-blue-400 p-4 my-4">
  <div className="flex">
    <div className="ml-3">
      <p className="text-sm text-blue-700">
        <strong>Total installation time:</strong> 8-15 minutes depending on your environment and hardware.
      </p>
    </div>
  </div>
</div>

### Installation Output

During installation, you'll see colored log output showing progress:

```bash
[INFO] Starting Permit Platform deployment...
[INFO] Validating frontend domain configuration...
✅ Frontend domain configured: permit.yourcompany.com
[INFO] Loading Docker images...
✅ Loaded 12 platform images successfully
[INFO] Deploying third-party services...
✅ PostgreSQL ready
✅ Redis ready  
✅ OpenSearch ready
[INFO] Running database migrations...
✅ Backend migrations completed
✅ OPAL relay migrations completed
[INFO] Deploying platform services...
✅ All services deployed and healthy
[SUCCESS] Permit Platform installed successfully!
```

### Automatic Password Generation

The installer automatically generates secure passwords for all services and updates your values.yaml file:

- **PostgreSQL**: Database password
- **RabbitMQ**: Message queue password  
- **Keycloak Admin**: Administrator password for authentication server
- **Keycloak Database**: Keycloak's database password

**Your login credentials will be displayed at the end of installation.**

## Post-Installation

### Access Your Platform

Once installation completes, you can access the Permit Platform:

```bash
# Using your configured domain
https://permit.yourcompany.com

# Or if you configured a .local domain
https://permit-platform.local
```

### Initial Login

Use the administrator credentials displayed at the end of installation:

```
Username: admin
Password: [Generated password shown during installation]
```

<div className="bg-green-50 border-l-4 border-green-400 p-4 my-4">
  <div className="flex">
    <div className="ml-3">
      <p className="text-sm text-green-700">
        <strong>First time setup:</strong> The platform will guide you through creating your first organization and project.
      </p>
    </div>
  </div>
</div>

### DNS Configuration

For production deployments with custom domains, configure your DNS:

```bash
# Point your domain to the server where Permit is installed
permit.yourcompany.com A <server-ip>

# Or for development/internal use
permit-platform.local A <server-ip>
```

### TLS/SSL Certificates

The installer automatically generates self-signed certificates for immediate use. For production:

1. **Development/Internal**: Self-signed certificates are sufficient
2. **Production**: Replace with certificates from your organization's CA
3. **Public access**: Use certificates from a trusted CA (Let's Encrypt, etc.)

To use custom certificates, replace the files in the `certs/` directory before installation.

## Verification and Health Checks

### Check Platform Status

The installer provides several ways to verify your deployment:

```bash
# Check all pods are running
kubectl get pods -n permit-platform

# Check services and endpoints
kubectl get services -n permit-platform

# View deployment status
kubectl get deployments -n permit-platform
```

Expected output - all pods should show "Running" status:
```
NAME                                        READY   STATUS    
permit-backend-v2-xxx                       1/1     Running   
permit-frontend-xxx                         1/1     Running   
opal-server-xxx                             1/1     Running   
postgres-xxx                                1/1     Running   
redis-xxx                                   1/1     Running   
keycloak-xxx                                1/1     Running   
```

### Verify Web Access

1. **Open your browser** to `https://[your-frontend-domain]`
2. **Accept the self-signed certificate** (for development/internal use)
3. **You should see the Permit login page**
4. **Login with admin credentials** shown during installation
5. **Complete organization setup** if prompted

### Check Service Logs

If you encounter issues, check service logs:

```bash
# Backend service logs
kubectl logs -n permit-platform deployment/permit-backend-v2

# Frontend service logs  
kubectl logs -n permit-platform deployment/permit-frontend

# Authentication service logs
kubectl logs -n permit-platform deployment/keycloak

# Database logs
kubectl logs -n permit-platform deployment/postgres
```

### Network Connectivity

Verify ingress is working:

```bash
# Check ingress controller
kubectl get pods -n ingress-nginx

# Test internal connectivity
kubectl exec -n permit-platform deployment/permit-backend-v2 -- curl -k https://permit-frontend/health
```

## Common Configuration Adjustments

### Resource Scaling

If you need to adjust resources after installation:

```bash
# Scale backend replicas
kubectl scale deployment permit-backend-v2 -n permit-platform --replicas=3

# Scale celery workers
kubectl scale deployment celery-general -n permit-platform --replicas=2
```

### Storage Configuration

For production deployments, ensure persistent storage:

```bash
# Check persistent volumes
kubectl get pv

# Check storage classes
kubectl get storageclass
```

## Troubleshooting Installation Issues

### Installation Fails at Image Loading

```bash
# Check Docker service
systemctl status docker

# Check available disk space
df -h

# Check image registry connectivity
docker pull hello-world
```

### Frontend Domain Resolution Issues

```bash
# Test DNS resolution
nslookup [your-frontend-domain]

# Check hosts file (for .local domains)
cat /etc/hosts

# Verify ingress configuration
kubectl get ingress -n permit-platform
```

### Database Connection Issues

```bash
# Check PostgreSQL pod
kubectl logs -n permit-platform deployment/postgres

# Test database connectivity
kubectl exec -n permit-platform deployment/postgres -- pg_isready
```

### Policy Sync Issues (if configured)

```bash
# Check Policy Sync service logs
kubectl logs -n permit-platform deployment/permit-policy-sync-v2

# Verify SSH key configuration
kubectl get secret policy-sync-ssh-key -n permit-platform -o yaml
```

## Next Steps

<div className="bg-blue-50 border-l-4 border-blue-400 p-4 my-4">
  <div className="flex">
    <div className="ml-3">
      <p className="text-sm text-blue-700">
        <strong>Installation complete!</strong> Continue to the <a href="/how-to/deploy/on-prem/management" className="underline">Management Guide</a> to learn about day-to-day operations and maintenance.
      </p>
    </div>
  </div>
</div>

### Recommended Next Steps

1. **[Management Guide](/how-to/deploy/on-prem/management)** - Learn daily operations
2. **[Troubleshooting Guide](/how-to/deploy/on-prem/troubleshooting)** - Common issues and solutions
3. **Create your first project** - Set up authorization policies
4. **Configure Policy Sync** - Connect to your Git repository (if not done during installation)
5. **Set up monitoring** - Configure log aggregation and alerting