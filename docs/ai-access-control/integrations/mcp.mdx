---
title: Model Context Protocol
---

Permit.io's MCP (Model Content Protocol) servelts provides a comprehensive infratruture to manage AI access control to secure external access.

In this guide, we will walk thoguht the varoius Permit servelts, demonstrate how they can help you build secure AI agents.


The Model Context Protocol (MCP) is an open standard that facilitates seamless integration between Large Language Models (LLMs) and external tools or data sources. By standardizing how applications provide context to LLMs, MCP enables AI models to access and interact with various resources securely and efficiently. 

Permit.io enhances this integration by introducing fine-grained access control mechanisms within the MCP framework. This ensures that AI-driven operations adhere to predefined security policies, maintaining control over data access and external interactions.

:::infoTip
Permit's MCP integration is still in early-access. If you're interested in learning more or trying it out, please [contact us](https://calendly.com/permitio/ai-access-control).
:::

## Initiating Access Requests to Human Users

In scenarios where an AI agent requires permissions beyond its current scope, it can initiate access requests that prompt human users for approval. This "human-in-the-loop" approach ensures sensitive operations are authorized appropriately.

#### Technical Capabilities:

- AI agents can generate access requests dynamically.
- Requests are routed to designated human approvers based on organizational policies.
- Real-time tracking of request statuses and outcomes.

**Implementation Example:**

When an AI agent needs to access a restricted resource, it can send an access request through the MCP server. The following Python code snippet demonstrates how to initiate such a request using Permit.io's API:


```python
@mcp.tool()
async def request_access(username: str, resource: str, resource_name: str) -> dict:
    """
    Initiate access request to a specific resource in the system.

    Args:
        username: The username of the person requesting access.
        resource: The resource type the user is requesting access for.
        resource_name: The name of the resource to request access for.

    Returns:
        dict: Confirmation message indicating the request status.
    """
    # Log in as the user
    login = await permit.elements.login_as({"userId": slugify(username), "tenant": "default"})
    
    # Define the access request payload
    payload = {
        "access_request_details": {
            "tenant": "default",
            "resource": resource,
            "resource_instance": resource_name['id'],
            "role": "viewer",
        },
        "reason": f"User {username} requests role 'viewer' for {resource_name}"
    }
    
    # Set the API endpoint and headers
    url = f"https://api.permit.io/v2/facts/{PROJECT_ID}/{ENV_ID}/access_requests/{ELEMENTS_CONFIG_ID}/user/{slugify(username)}/tenant/default"
    headers = {
        "authorization": "Bearer YOUR_API_SECRET_KEY",
        "Content-Type": "application/json",
    }
    
    # Send the access request
    async with httpx.AsyncClient() as client:
        response = await client.post(url, json=payload, headers=headers)
        return {"message": "Your request has been sent. Please check back later."}
```


In this example, the `request_access` function logs in as the specified user and sends an access request for a particular resource. The request is then routed to the appropriate human user for approval, ensuring that sensitive operations are authorized explicitly.

## Filtering Resources Based on User Permissions

To maintain data security and compliance, it's crucial that AI agents access only the resources for which users have explicit permissions. The Permit.io and MCP integration enforces this by filtering resources based on user-specific authorization policies. This ensures that AI agents operate within the boundaries of each user's access rights.

#### Technical Capabilities:

- Filter queries and results based on user permissions to determine accessible resources.
- Real-time adjustment of accessible data as user roles or policies change.
- Seamless integration with various data sources and vector databases.


## Initiating Operation Approval Flows from Human Users

Certain operations performed by AI agents may require explicit human approval, especially when they involve critical actions like financial transactions or data modifications. The integration between Permit.io and MCP allows AI agents to initiate operation approval workflows, ensuring that such actions are vetted by human users before execution.

#### Technical Capabilities:

- AI agents can identify operations necessitating human approval.
- Automated initiation of approval workflows routed to appropriate personnel.
- Logging and auditing of approval processes for compliance tracking.


---

By integrating Permit.io's access control features with MCP's standardized protocol, organizations can enhance the security and compliance of their AI systems. This collaboration ensures that AI agents operate within defined authorization boundaries, with human users involved in approving sensitive actions, thereby maintaining a balance between automation and oversight. 

