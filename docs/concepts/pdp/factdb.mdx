---
sidebar_position: 11
title: Handling Volume ( EAP )
---

# FactDB ( EAP )

FactDB is a new feature that allows you to store and query facts more efficiently in the PDP.
It uses embedded DB technology to store facts in a more efficient way instead of the policy engine memory,
and provides a RestAPI to query those facts.

:::info EAP
This feature is in EAP stage - please contact with us if you want to try it out.
:::
:::warning
To use this feature all your PDPs must be upgraded to version 0.7.0 or above.
Otherwise, some features might not work as expected.
:::

## Enabling FactDB

To enable the FactDB on your environment there are two configurations that you need to set:
### Set the FactDB configuration on Permit.io environment settings
1. Copy your environment API Key
2. Perform the following GET request to get your current environment settings
```bash
curl --request GET 'https://api.permit.io/v2/projects/{proj_id}/envs/{env_id}' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer {api_key}'
```
3. If you already have some settings in place, merge the current settings with the ones, given in the next step.
4. Perform the following PATCH request to update your environment settings and enable FactDB
```bash
curl --location --request PATCH 'https://api.permit.io/v2/projects/{proj_id}/envs/{env_id}' \
--header 'Content-Type: application/json' \
--header 'Accept: application/json' \
--header 'Authorization: Bearer {api_key}' \
--data-raw '{
  "settings": {
        "enable_external_data_store":true,
        "allow_legacy_data_store":true
    }
}'
```

### Enable FactDB on your PDP
After you have enabled the FactDB on your environment, you need to enable it on your PDPs as well.
This is done be setting the following environment variable on your PDPs
- `PDP_ENABLE_EXTERNAL_DATA_MANAGER=true`

:::info
If you have multiple PDPs, you need to set this environment variable on all of them.
The reason that the flag is also required on the PDP side is
to allow environments to run both with FactDB and without it.
:::